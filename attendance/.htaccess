RewriteEngine On

# Keep the current URL rewriting rules
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# Redirect the root to index.php
RewriteRule ^$ index.php [L]

# Check if the request is for qr_scanner.php
RewriteCond %{REQUEST_URI} ^qr_scanner.php$

# Check if the current day is Sunday (Sunday = 0)
RewriteCond %{TIME_WDAY} ^0$

# Check if the current time is outside of 8:00 AM to 5:00 PM (in 24-hour format)
RewriteCond %{TIME_HOUR} <08
RewriteRule ^.*$ closed.php [R=302,L]

RewriteCond %{TIME_HOUR} >17
RewriteRule ^.*$ closed.php [R=302,L]

# Check if the time is outside the allowed period on weekdays (Monday to Saturday)
RewriteCond %{TIME_WDAY} >0
RewriteCond %{TIME_WDAY} <7

# Check if the current time is outside of 8:00 AM to 5:00 PM
RewriteCond %{TIME_HOUR} <08
RewriteRule ^.*$ closed.php [R=302,L]

RewriteCond %{TIME_HOUR} >17
RewriteRule ^.*$ closed.php [R=302,L]
